<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Card Prototype</title>
    <!-- We need Tailwind for the styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- NOTE: Removed Lucide icon script, as we are using a plain 'X' for the close button -->

    <style>
        /* Base styles from your existing site (dark mode) */
        body {
            background-color: #111;
            color: #fff;
            font-family: 'Inter', sans-serif;
        }

        /*
         * 1. STYLES FOR THE MODAL (THE POPUP)
         */

        /* ... existing modal styles ... */
        .modal-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem; /* Added padding for small screens */

            /* Hidden state */
            opacity: 0;
            visibility: hidden;
            pointer-events: none;

            /* Animation */
            transition: all 0.3s ease;
        }
        .modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }
        .modal-content {
            position: relative;
            z-index: 101;
            background-color: #1a1a1a;
            border: 1px solid #333;
            border-radius: 1rem;
            width: 90%;
            max-width: 60rem; /* 960px */
            max-height: 90vh;
            overflow-y: auto;
            
            /* Animation */
            transform: scale(0.9);
            transition: all 0.3s ease;
        }
        
        /* UPDATED: Close button styling */
        .modal-close-btn {
            position: absolute;
            top: 0.75rem; /* 12px */
            right: 1rem;  /* 16px */
            z-index: 102;
            color: #888;
            cursor: pointer;
            transition: all 0.2s ease;
            background: none;
            border: none;
            padding: 0;
            font-size: 2.5rem; /* 40px */
            line-height: 1;
            font-weight: 300;
        }
        .modal-close-btn:hover {
            color: #fff;
            transform: rotate(90deg) scale(1.1);
        }

        /*
         * 2. STYLES FOR THE "OPEN" STATE
         */
        /* ... existing open styles ... */
        .modal-container.is-open {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }
        .modal-container.is-open .modal-content {
            transform: scale(1);
        }

        /*
         * 3. STYLES FOR THE PROJECT CARD
         */
        /* ... existing card styles ... */
        .project-card {
            background-color: #1a1a1a;
            border: 1px solid #333;
            border-radius: 1rem;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(240, 0, 180, 0.1);
        }
        .project-image {
            position: relative;
            overflow: hidden;
        }
        .project-img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        .project-card:hover .project-img {
            transform: scale(1.05);
        }
        .project-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
            opacity: 1;
            transition: opacity 0.3s ease;
        }
        .project-category {
            position: absolute;
            top: 1rem;
            left: 1rem;
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 99px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        .view-project-btn {
            position: absolute;
            bottom: 1rem;
            right: 1rem;
            background: linear-gradient(to right, #f92fbe, #c42fd0);
            color: white;
            padding: 0.75rem 1.25rem;
            border-radius: 99px;
            font-weight: 600;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.3s ease;
            transform: translateY(10px) scale(0.9);
            opacity: 0;
        }
        .project-card:hover .view-project-btn {
            transform: translateY(0) scale(1);
            opacity: 1;
        }
        .view-project-btn:hover {
            box-shadow: 0 5px 15px rgba(240, 0, 180, 0.3);
        }
        .project-content {
            padding: 1.5rem;
        }
        .project-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 0.5rem;
        }
        .project-description {
            font-size: 0.875rem;
            color: #aaa;
            margin-bottom: 1rem;
            height: 40px; /* Ensures consistent card height */
        }
        .project-tech {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        .tech-tag {
            background-color: #2a2a2a;
            color: #aaa;
            padding: 0.25rem 0.75rem;
            border-radius: 99px;
            font-size: 0.75rem;
        }

        /* * 4. NEW: IMAGE DIFF (BEFORE/AFTER) SLIDER STYLES 
         */
        .diff-container {
            position: relative;
            width: 100%;
            /* === CHANGED THIS LINE === */
            aspect-ratio: 16 / 9; /* Changed from 1/1 for a widescreen look */
            /* ======================== */
            overflow: hidden;
            border-radius: 0.5rem;
            border: 1px solid #333;
            /* NEW: Use Grid for layout */
            display: grid;
        }
        /* NEW: Make all children stack in the same cell */
        .diff-container > * {
            grid-column: 1 / -1;
            grid-row: 1 / -1;
            /* Prevent grid from adding extra space */
            min-width: 0; 
        }
        .diff-item-1, .diff-item-2 {
            /* REMOVED: position: absolute, top, left */
            width: 100%;
            height: 100%;
            overflow: hidden; /* This is key */
        }
        .diff-item-1 img, .diff-item-2 img {
            /* REMOVED: position: absolute, top, left */
            width: 100vw;    /* NEW: Force image to be wide */
            max-width: none; /* NEW: Allow image to be wide */
            height: 100%;
            object-fit: cover;
            /* Prevents dragging the image itself */
            pointer-events: none;
            user-select: none;
        }
        .diff-item-2 {
            /* We will control this width with JS */
            width: 50%; 
        }
        .diff-resizer {
            position: absolute;
            top: 0;
            left: 50%; /* JS will control this */
            width: 44px; /* Make it easy to grab on mobile */
            height: 100%;
            cursor: ew-resize;
            z-index: 10;
            /* Visually center the grabber */
            transform: translateX(-50%);
            /* Add a visual grabber handle */
            display: flex;
            align-items: center;
            justify-content: center;
        }
        /* The vertical line */
        .diff-resizer::before {
            content: '';
            position: absolute;
            width: 2px;
            height: 100%;
            background: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }
        /* The circular grabber icon */
        .diff-resizer::after {
            content: '||';
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: black;
            background: white;
            border-radius: 99px;
            width: 30px;
            height: 30px;
            font-weight: bold;
            transform: rotate(90deg);
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }

        /* * 5. NEW: IMAGE GALLERY GRID STYLES
         */
        .image-gallery-grid {
            display: grid;
            /* Responsive grid: 2 cols on mobile, 4 on desktop */
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-top: 1.5rem;
        }
        @media (min-width: 768px) {
            .image-gallery-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            aspect-ratio: 1 / 1;
            border-radius: 0.5rem;
            border: 1px solid #333;
            transition: all 0.2s ease;
        }
        .gallery-item img:hover {
            border-color: #f000b4;
            transform: scale(1.03);
        }
        .gallery-item p {
            font-size: 0.875rem; /* 14px */
        }
    </style>
</head>

<body class="p-8">

    <div class="container mx-auto max-w-6xl">
        <h1 class="text-4xl md:text-6xl font-bold text-white mb-12 text-center">
            My <span class="bg-gradient-to-r from-fuchsia-500 to-pink-500 text-transparent bg-clip-text">Work</span>
        </h1>

        <!-- 
        ==================================================
        1. THE PROJECT CARD
        ==================================================
        -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 projects-grid">

            <!-- PROJECT CARD 1: AI Catalog -->
            <div class="project-card">
                <div class="project-image">
                    <img src="https://placehold.co/600x400/1a1a1a/f0f0f0?text=AI+Catalog+After" alt="AI Catalog Project" class="project-img">
                    <div class="project-overlay">
                        <div class="project-category">AI Catalog Maker</div>
                        <!-- This button triggers the modal -->
                        <button class="view-project-btn" data-project-id="ai-catalog-1">
                            View Details
                        </button>
                    </div>
                </div>
                <div class="project-content">
                    <h3 class="project-title">Cosmetics Brand Catalog</h3>
                    <p class="project-description">Transformed 50+ phone snaps into a professional, sales-driving product catalog.</p>
                    <div class="project-tech">
                        <span class="tech-tag">AI Imaging</span>
                        <span class="tech-tag">Photoshop</span>
                        <span class="tech-tag">Color Grading</span>
                    </div>
                </div>
            </div>

            <!-- PROJECT CARD 2: Web Dev -->
            <div class="project-card">
                <div class="project-image">
                    <img src="https://placehold.co/600x400/1a1a1a/f0f0f0?text=Rapid+Website" alt="Rapid Web Project" class="project-img">
                    <div class="project-overlay">
                        <div class="project-category">Rapid Web Development</div>
                        <!-- This button links to a different project ID -->
                        <button class="view-project-btn" data-project-id="web-dev-1">
                            View Details
                        </button>
                    </div>
                </div>
                <div class="project-content">
                    <h3 class="project-title">Startup Landing Page</h3>
                    <p class="project-description">Designed, built, and launched a single-page website in just 24 hours.</p>
                    <div class="project-tech">
                        <span class="tech-tag">HTML</span>
                        <span class="tech-tag">TailwindCSS</span>
                        <span class="tech-tag">GSAP</span>
                    </div>
                </div>
            </div>

            <!-- Add more project cards here... -->

        </div>
    </div>


    <!-- 
    ==================================================
    2. THE PROJECT MODAL
    ==================================================
    -->
    <div id="projectModalContainer" class="modal-container">
        
        <!-- The dark overlay -->
        <div id="modalOverlay" class="modal-overlay"></div>
        
        <!-- The modal content box -->
        <div class="modal-content">
            
            <!-- UPDATED: Close Button -->
            <button id="modalCloseBtn" class="modal-close-btn" aria-label="Close modal">
                &times; <!-- A simple and universal 'X' -->
            </button>

            <!-- Dynamic Content Body -->
            <div id="modalBody" class="p-6 md:p-10">
                <!-- Project details will be injected here by JavaScript -->
            </div>
        </div>
    </div>


    <!-- 
    ==================================================
    3. THE JAVASCRIPT
    ==================================================
    -->
    <script>
        /*
         * A. PROJECT DATABASE
         */
        const projectData = {
            
            "ai-catalog-1": {
                category: "AI Catalog Maker",
                title: "Cosmetics Brand Catalog",
                
                // NEW: Specific images for the diff slider
                // Use 16:9 placeholders
                beforeImage: "assets/powerpops.jpeg",
                afterImage: "assets/sweet_escape.jpeg",
                
                // NEW: Gallery for the grid (the "other" images)
                galleryImages: [
                    { src: "https://placehold.co/600x600/1a1a1a/f0f0f0?text=AFTER+(Contextual)", caption: "Contextual Shot" },
                    { src: "https://placehold.co/600x600/1a1a1a/f0f0f0?text=AFTER+(Detail)", caption: "Detail Shot" },
                    { src: "https://placehold.co/600x600/1a1a1a/f0f0f0?text=AFTER+(Angle+3)", caption: "Angle 3" },
                    { src: "https://placehold.co/600x600/1a1a1a/f0f0f0?text=AFTER+(Angle+4)", caption: "Angle 4" }
                ],
                description: "This client came to us with 50+ product photos taken on a standard smartphone. They needed a professional, consistent look for their new e-commerce store but had a very limited budget and timeline.<br><br>Our team used a combination of AI-powered background removal, generative fill for shadows and reflections, and expert color grading to transform every image. We delivered a complete, sales-ready catalog at <strong>80% less cost</strong> than a traditional photoshoot.",
                tags: ["AI Imaging", "Generative Fill", "Color Grading", "E-Commerce", "Photoshop"],
                demoUrl: null // No demo link for this one
            },

            "web-dev-1": {
                category: "Rapid Web Development",
                title: "Startup Landing Page (24-Hour Launch)",
                // This project does NOT have a beforeImage, so it won't get the diff slider.
                beforeImage: null, 
                // Use a 16:9 placeholder
                afterImage: "https://placehold.co/1600x900/1a1a1a/f0f0f0?text=Live+Website+Screenshot",
                // This project does NOT have galleryImages, so it won'g get the grid.
                galleryImages: [], 
                description: "This startup needed to go from idea to a live, professional landing page to capture investor interestâ€”and they needed it *fast*.<br><br>Our rapid development team worked directly with the founder, finalizing the design, copy, and development in a single 24-hour sprint. The site is fully responsive, SEO-optimized, and features subtle animations to impress visitors.",
                tags: ["HTML", "TailwindCSS", "GSAP", "SEO", "24-Hour Delivery"],
                demoUrl: "#" // Add a link to the live site here
            }
            // Add more projects here...
        };


        /*
         * B. MODAL FUNCTIONALITY
         */
        document.addEventListener('DOMContentLoaded', () => {
            
            // Get all the necessary elements
            const modalContainer = document.getElementById('projectModalContainer');
            const modalBody = document.getElementById('modalBody');
            const modalCloseBtn = document.getElementById('modalCloseBtn');
            const modalOverlay = document.getElementById('modalOverlay');
            const viewProjectBtns = document.querySelectorAll('.view-project-btn');

            // Function to render the correct content into the modal
            function renderModalContent(project) {
                // Clear the old content
                modalBody.innerHTML = '';
                
                // Create the 'Before/After' or 'Single Image' block
                let imageBlock = '';
                
                // NEW: Check for diff slider
                if (project.beforeImage && project.afterImage) {
                    imageBlock = `
                        <div class="mb-6">
                            <h4 class="text-sm font-semibold text-gray-400 uppercase mb-3 text-center">Slide to Compare Before & After</h4>
                            <div class="diff-container" id="diffContainer">
                                <div class="diff-item-1">
                                    <img src="${project.beforeImage}" alt="Before">
                                </div>
                                <div class="diff-item-2" id="diffAfter">
                                    <img src="${project.afterImage}" alt="After">
                                </div>
                                <div class="diff-resizer" id="diffResizer"></div>
                            </div>
                        </div>
                    `;
                } else if (project.afterImage) {
                    // Fallback for non-diff projects
                    imageBlock = `
                        <div class="mb-6">
                            <img src="${project.afterImage}" alt="${project.title}" class="rounded-lg border border-gray-700 w-full" style="aspect-ratio: 16/9; object-fit: cover;">
                        </div>
                    `;
                }
                
                // NEW: Check for gallery grid
                let galleryBlock = '';
                if (project.galleryImages && project.galleryImages.length > 0) {
                    const galleryItems = project.galleryImages.map(img => `
                        <a href="${img.src}" target="_blank" class="gallery-item" title="View full size: ${img.caption}">
                            <img src="${img.src}" alt="${img.caption}">
                            <p class="text-center text-sm text-gray-400 mt-2">${img.caption}</p>
                        </a>
                    `).join('');
                    
                    galleryBlock = `
                        <div class="mt-10 pt-8 border-t border-gray-700">
                            <h3 class="text-2xl font-bold text-white mb-6">More Project Images</h3>
                            <div class="image-gallery-grid">
                                ${galleryItems}
                            </div>
                        </div>
                    `;
                }
                
                // Create the tags block
                const tagsBlock = project.tags.map(tag => 
                    `<span class="bg-gray-700 text-gray-300 px-3 py-1 rounded-full text-xs font-medium">${tag}</span>`
                ).join('');
                
                // Create the demo button (if a URL exists)
                const demoButton = project.demoUrl ? 
                    `<a href="${project.demoUrl}" target="_blank" class="inline-block bg-gradient-to-r from-fuchsia-500 to-pink-500 text-white font-semibold px-6 py-3 rounded-lg transition-transform hover:scale-105">
                        View Live Project
                    </a>` : '';

                // Assemble the final HTML for the modal
                const modalHTML = `
                    <div class="text-left">
                        <p class="text-sm font-semibold text-fuchsia-400 uppercase mb-2">${project.category}</p>
                        <h2 class="text-3xl md:text-4xl font-bold text-white mb-6">${project.title}</h2>
                        
                        ${imageBlock} <!-- The diff slider OR single image -->
                        
                        <div class="text-gray-300 mb-8">
                            <p>${project.description}</p>
                        </div>
                        
                        <div class="flex flex-col sm:flex-row flex-wrap items-start sm:items-center gap-x-4 gap-y-6">
                            <div classs="flex flex-wrap gap-2">
                                ${tagsBlock}
                            </div>
                            <div class="mt-2 sm:mt-0">
                                ${demoButton}
                            </div>
                        </div>

                        ${galleryBlock} <!-- The "other images" grid -->
                    </div>
                `;

                modalBody.innerHTML = modalHTML;
            }

            // Function to open the modal
            function openModal(projectId) {
                const project = projectData[projectId];
                if (!project) {
                    console.error('Project data not found for ID:', projectId);
                    return;
                }
                
                renderModalContent(project);
                modalContainer.classList.add('is-open');
                document.body.style.overflow = 'hidden'; 

                // NEW: Attach Diff-Slider logic
                const diffContainer = document.getElementById('diffContainer');
                if (diffContainer) {
                    const resizer = document.getElementById('diffResizer');
                    const afterItem = document.getElementById('diffAfter');
                    
                    let isDragging = false;

                    const onMove = (e) => {
                        if (!isDragging) return;
                        
                        // Get coordinates
                        // Handle both mouse and touch events
                        let x = e.clientX || (e.touches && e.touches[0].clientX);
                        if (x === undefined) return;
                        
                        const rect = diffContainer.getBoundingClientRect();
                        let percentage = ((x - rect.left) / rect.width) * 100;
                        
                        // Clamp between 0 and 100
                        if (percentage < 0) percentage = 0;
                        if (percentage > 100) percentage = 100;
                        
                        resizer.style.left = `${percentage}%`;
                        afterItem.style.width = `${percentage}%`;
                    };

                    const onStop = () => {
                        isDragging = false;
                        document.removeEventListener('mousemove', onMove);
                        document.removeEventListener('mouseup', onStop);
                        document.removeEventListener('touchmove', onMove);
                        document.removeEventListener('touchend', onStop);
                    };

                    const onStart = (e) => {
                        isDragging = true;
                        document.addEventListener('mousemove', onMove);
                        document.addEventListener('mouseup', onStop);
                        document.addEventListener('touchmove', onMove, { passive: true });
                        document.addEventListener('touchend', onStop);
                        
                        // Only prevent default for mouse events to avoid scrolling issues on touch
                        if (e.type === 'mousedown') {
                            e.preventDefault(); 
                        }
                    };
                    
                    resizer.addEventListener('mousedown', onStart);
                    resizer.addEventListener('touchstart', onStart, { passive: true });
                }
            }

            // Function to close the modal
            function closeModal() {
                modalContainer.classList.remove('is-open');
                document.body.style.overflow = 'auto'; // Re-enable body scrolling
            }

            // Add click listeners to all "View Details" buttons
            viewProjectBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const projectId = btn.dataset.projectId;
                    openModal(projectId);
                });
            });

            // Add click listeners to close the modal
            modalCloseBtn.addEventListener('click', closeModal);
            modalOverlay.addEventListener('click', closeModal);

            // Optional: Close modal with the 'Escape' key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && modalContainer.classList.contains('is-open')) {
                    closeModal();
                }
            });

        });
    </script>
</body>

</html>


